# 2.3 웹 MVC와 JDBC의 결합

JDBC를 이용해서 DAO를 구성했다. 이후에는 1장에서 만든 서비스와 컨트롤러 객체를 연동해서 최종적으로 실행 가능한 웹 애플리케이션을
만드려고 함

## ModelMapper 라이브러리
- TodoDTO 생성
  ```java
  @Builder
  @Data
  @NoArgsConstructor
  @AllArgsConstructor
  public class TodoDTO {
    private Long tno;
    private String title;
    private LocalDate dueDate;
    private boolean finished;
  }
  ```
  - TodoVO와 완전히 같은 구조를 가지고 있지만 어노테이션 차이가 있다.
  - TodoDTO의 경우 @Data를 이용하는데 @Data는 getter/setter/toString/equals/hashCode 등을 모두 컴파일할 때 생성해준다.
  - VO의 경우 getter만 이용해서 읽기 전용으로 구성하는 것과 차이가 있음 (가능하다면 VO는 주로 읽기 위주의 작업을 위해서 사용)
  > DTO와 VO를 둘 다 만들어야 하는가에 대한 논쟁은 존재하지만 필자는 DTO와 VO를 구분해서 만드는 방식이 더 나은 방법이라고 생각함. 
  > 우선은 나중에 사용하게 될 JPA에서는 필수적이기 때문에 필요하고, 스프링에서도 DTO는 검증이나 변환에서 전혀 다른 어노테이션들이 필요하기 때문
- 여기서 가장 번거로운 것은 DTO <-> VO 의 변환이다.
- 이를 ModelMapper 라이브러리를 이용해 처리한다.
  1. dependencies 추가,
  ```groovy
  dependencies {
  
  ...

  // https://mvnrepository.com/artifact/org.modelmapper/modelmapper
  implementation group: 'org.modelmapper', name: 'modelmapper', version: '2.1.1'
  }
  ```
  2. 현재 예제의 경우 DTO는 getter/setter 모두를 사용하지만 VO의 경우는 getter만을 사용하기 때문에 ModelMapper 설정을 변경해서 사용할것, 
  일단 이를 위해 TodoVO에 생성자 관련 어노테이션 추가
  ```java
  @Getter
  @Builder
  @ToString
  @NoArgsConstructor
  @AllArgsConstructor
  public class TodoVO {
  private Long tno;
  private String title;
  private LocalDate dueDate;
  private boolean finished;
  }
  ```
  > @NoArgsConstructor로 파라미터가 없는 생성자, @AllArgsConstructor로 모든 필드값이 필요한 생성자를 만들어낸다.
  3. 프로젝트에 util 패키지를 추가한 후 ModelMapper의 설정을 변경하고 쉽게 사용할 수 있는 MapperUtil을 enum으로 생성
  ```java
  import org.modelmapper.ModelMapper;
  import org.modelmapper.config.Configuration;
  import org.modelmapper.convention.MatchingStrategies;
  
  public enum MapperUtil {
    INSTANCE;
    
    private ModelMapper modelMapper;
    
    MapperUtil(){
      this.modelMapper = new ModelMapper();
      this.modelMapper.getConfiguration()
              .setFieldMatchingEnabled(true)
              .setFieldAccessLevel(Configuration.AccessLevel.PRIVATE)
              .setMatchingStrategy(MatchingStrategies.STRICT);
    }
    
    public ModelMapper get(){
      return modelMapper;
    }
    
  }
  ```
  > getConfiguration()를 이용해 private로 선언된 필드도 접근 가능하도록 설정을 변경하고 get()을 이용해 ModelMapper를 사용할 수 있도록 구성


## TodoService와 ModelMapper 테스트
  

